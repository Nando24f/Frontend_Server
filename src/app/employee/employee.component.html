<div class="container">
  <h2>Consulta de empleados por gerente</h2>

  <div class="controls">
    <label for="manager">Seleccione un gerente:</label>
    <select id="manager" [(ngModel)]="selectedManagerId">
      <option *ngFor="let manager of managers" [value]="manager.emp_no">
        {{ manager.first_name }} {{ manager.last_name }} ({{ manager.emp_no }})
      </option>
    </select>
    <button (click)="loadManagerData()">Consultar</button>
  </div>

  <div *ngIf="employeeCount > 0">
    <h3>La cantidad de personas que trabajan para {{ selectedManagerName }} es: {{ employeeCount }}</h3>

    <div class="charts">
      <div>
        <h4>Empleados del gerente</h4>
        <canvas baseChart 
          [data]="[employeeCount, totalEmployees - employeeCount]" 
          [labels]="['Gerente', 'Otros']"
          [chartType]="'pie'">
        </canvas>
      </div>
      <div>
        <h4>Empleados totales</h4>
        <canvas baseChart 
          [data]="[totalEmployees]" 
          [labels]="['Total']"
          [chartType]="'bar'">
        </canvas>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>Emp No</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Género</th>
          <th>Fecha Contratación</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let emp of employees">
          <td>{{ emp.emp_no }}</td>
          <td>{{ emp.first_name }}</td>
          <td>{{ emp.last_name }}</td>
          <td>{{ emp.gender }}</td>
          <td>{{ emp.hire_date }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
