<div class="container">
  <div class="sidebar">
    <h3>Managers</h3>
    <select [(ngModel)]="selectedManagerId" class="manager-select" (change)="onSearch()">
      <option *ngFor="let manager of managers" [ngValue]="manager.manager_id">
        {{ manager.first_name }} {{ manager.last_name }} (ID: {{ manager.manager_id }})
      </option>
    </select>
    <button (click)="onSearch()" class="search-button" [disabled]="!selectedManagerId">
      Search
    </button>
  </div>

  <div class="main-content">
    <div *ngIf="loading" class="loading">Loading...</div>

    <div *ngIf="maleEmployees.length > 0" class="results">
      <h3>Male Employees Count: {{ maleEmployeesCount }}</h3>
      
      <div class="chart-container">
        <h3>Employees Distribution</h3>
        <p-chart *ngIf="chartData" type="pie" [data]="chartData"></p-chart>
      </div>

      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Gender</th>
            <th>Birth Date</th>
            <th>Hire Date</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let employee of maleEmployees">
            <td>{{ employee.emp_no }}</td>
            <td>{{ employee.first_name }}</td>
            <td>{{ employee.last_name }}</td>
            <td>{{ employee.gender }}</td>
            <td>{{ employee.birth_date | date }}</td>
            <td>{{ employee.hire_date | date }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="maleEmployees.length === 0 && !loading" class="no-results">
      Select a manager and click "Search" to view male employees
    </div>
  </div>
</div>